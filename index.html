<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>XMas Wishlist</title>

  <style>
    :root{
      --bg:#2f6f58;
      --panel:#f26a6a;
      --card:#4ddee1;
      --card-accent: rgba(255,255,255,0.08);
      --accent:#7c3aed;
      --muted:#1f2937;
      --shadow: 0 8px 24px rgba(15,20,30,0.18);
      --radius:12px;
      --gap:16px;
      --max-width:1100px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      background: linear-gradient(180deg,var(--bg), #24563f 120%);
      color:var(--muted);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:28px;
      display:flex;
      justify-content:center;
    }

    .page {
      width:100%;
      max-width:var(--max-width);
    }

    header{
      padding:18px;
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:space-between;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:12px;
      box-shadow:var(--shadow);
      margin-bottom:18px;
    }

    h1{margin:0;font-size:18px;color:#fff}
    .controls{display:flex;gap:12px;align-items:center}
    .controls label{font-size:13px;color:rgba(255,255,255,0.9)}
    .controls select,input{margin-left:8px;padding:6px 8px;border-radius:8px;border:0;background:#fff;color:#222}

    main{padding:0 0 40px}
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
      gap:var(--gap);
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      display:flex;
      flex-direction:column;
      gap:10px;
      cursor:pointer;
      transition: transform .18s ease, box-shadow .18s ease;
      border: 1px solid rgba(255,255,255,0.03);
    }
    .card:focus, .card:hover{ transform: translateY(-6px); outline:none }

    .card-photo{width:100%;height:140px;object-fit:cover;border-radius:8px;background:#eee}
    .card-title{margin:0;font-size:16px;color:#fff}
    .card-price,.card-want{margin:0;color:rgba(255,255,255,0.9);font-size:13px}

    .modal {
      position: fixed;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,0.55);
      z-index: 9999;
      padding:16px;
    }

    .item-page{
      background: white;
      color:#222;
      padding:18px;
      border-radius:12px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.35);
      width: 880px;
      max-width:100%;
      max-height:90vh;
      overflow:auto;
    }

    .item-page.hidden{display:none}
    .back{background:none;border:0;color:var(--accent);cursor:pointer;padding:8px 0;font-weight:600}

    .item-detail{display:grid;grid-template-columns:360px 1fr;gap:18px;align-items:start}
    .item-detail img{width:100%;height:360px;object-fit:cover;border-radius:12px}
    .item-meta h2{margin-top:0}
    .links a{display:inline-block;margin-right:8px;margin-top:8px;padding:8px 12px;border-radius:8px;border:1px solid #e6e9ef;text-decoration:none;background:#fff;color:#222}

    footer{padding:16px 0;text-align:center;color:var(--muted);font-size:13px}

    @media (max-width:800px){
      .item-page{ width:100%; border-radius:12px 12px 0 0; margin:0; max-height:85vh; }
      .modal{ align-items:center; justify-content:center; padding:16px;}
      .item-detail{grid-template-columns:1fr; gap:12px}
      .item-detail img{height:220px}
      header{flex-direction:column;align-items:stretch}
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>ðŸŽ„ Sev's '25 Christmas Wishlist</h1>
      <div class="controls">
        <label>Sort:
          <select id="sortSelect">
            <option value="want_desc">Want rating (high â†’ low)</option>
            <option value="price_asc">Price (low â†’ high)</option>
            <option value="price_desc">Price (high â†’ low)</option>
          </select>
        </label>

        <label>Max price-to-want ratio:
          <input id="ratioRange" type="range" min="0" max="100" value="100">
          <span id="ratioValue">100</span>
        </label>

        <button id="clearFilters">Clear filters</button>
      </div>
    </header>

    <main id="app">
      <section id="gridView" class="grid" aria-live="polite"></section>
    </main>

    <div id="itemView" class="modal hidden" aria-hidden="true">
      <section class="item-page" role="dialog" aria-modal="true" aria-labelledby="itemTitle">
        <button id="backBtn" class="back" aria-label="Close">âœ• Close</button>
        <div class="item-detail">
          <img id="itemPhoto" src="" alt="item photo">
          <div class="item-meta">
            <h2 id="itemTitle"></h2>
            <p id="itemDesc"></p>
            <p><strong>Price range:</strong> <span id="itemPrice"></span></p>
            <p><strong>Want rating:</strong> <span id="itemWant"></span> / 10</p>
            <div id="itemLinks" class="links"></div>
          </div>
        </div>
      </section>
    </div>

    <template id="cardTemplate">
      <article class="card" tabindex="0">
        <img class="card-photo" src="" alt="">
        <div class="card-body">
          <h3 class="card-title"></h3>
          <p class="card-price"></p>
          <p class="card-want"></p>
        </div>
      </article>
    </template>

    <footer>
      <small>Gifts are not required. Your presence in my life is a present itself.</small>
    </footer>
  </div>

  <script>
  /* Data */
  const items = [
    { id: 1,
      title: "Nothing Phone 3a (Pro or Base)",
      photo: "https://www.gsmpro.com/cdn/shop/files/nothing-phone-3a-open-box.jpg?v=1747847576",
      desc: "Productivity and Work Phone | I don't mind second-hand",
      links: [{title:"Buy on Store", url:"https://digitalwalker.ph/products/nothing-phone-3a"}],
      priceLow: 15000, priceHigh: 28000, want: 7 
    },
    { id: 2,
      title: "iPad Mini (6 or 7)",
      photo: "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/ipad-mini-finish-unselect-gallery-1-202410_FMT_WHH?wid=2560&hei=1440&fmt=jpeg&qlt=90&.v=1727219498681",
      desc: "Very good for school, work, and general productivity | I don't mind second-hand",
      links: [{title:"Buy on Store", url:"https://www.apple.com/ph/shop/buy-ipad/ipad-mini"}],
      priceLow: 28000, priceHigh: 41000, want: 9 
    },
    { id: 3,
      title: "Sony ZVE10 Mark II or Canon EOS M50 Mark II",
      photo: "https://www.sony.com.ph/image/99dfce63ef9348016adff347452d380b?fmt=jpeg&wid=800&qlt=43",
      desc: "I like photos | I don't mind second-hand",
      links: [{title:"Buy on Store", url:"https://www.henryscameraphoto.com/"}],
      priceLow: 20000, priceHigh: 50000, want: 7 
    },
    { id: 4,
      title: "Cash",
      photo: "https://media.istockphoto.com/id/1495009751/photo/philippine-money-in-the-hand-on-a-gray-background.jpg?s=612x612&w=0&k=20&c=_wkN_Kl_kk3LHoHFQ29_0AaqevP60ho4CHTasfRz8N8=",
      desc: "Who doesn't like money",
      links: [{ title:"Copy GCash Number", url:"09171065673", copy:true }],
      priceLow: 500, priceHigh: 10000, want: 10
    },
    { id: 5,
      title: "Nintendo Switch (Lite or V1)",
      photo: "https://assets.nintendo.com/image/upload/c_fill,w_1200/q_auto:best/f_auto/dpr_2.0/ncom/My%20Nintendo%20Store/EN-US/Hardware/nintendo-switch-neon-blue-neon-red-joy-con-117972/117972-nintendo-switch-neon-blue-neon-red-package-front-1200x675",
      desc: "Gaming time ! I don't mind second-hand",
      links: [{title:"Buy on Store", url:"https://www.henryscameraphoto.com/"}],
      priceLow: 5000, priceHigh: 15000, want: 6
    },
    { id: 6,
      title: "Clothes",
      photo: "https://cdn11.bigcommerce.com/s-c7qlm8a06j/images/stencil/532x532/products/3207/32656/soft-boy-layered-sweatshirt_2__64633.1705238411.jpg?c=1",
      desc: "Any indie/soft/techwear aesthetic clothing",
      links: [{title:"Buy on Store", url:"https://www.uniqlo.com/ph/en/special-feature/holiday"}],
      priceLow: 500, priceHigh: 1000, want: 8
    },
    { id: 7,
      title: "PS5 Games or Steam Gift Card",
      photo: "https://gmedia.playstation.com/is/image/SIEPDC/ps5-games-keyart-01-en-30aug22?$facebook$",
      desc: "Steam Gift Cards are for PC Games, can be bought here: https://www.joytify.com/en-ph/voucher-steam-wallet | For PS5 Games, ideas are: Elden Ring, Wukong, Cyberpunk 2077",
      links: [{title:"Buy on Store", url:"https://ecommerce.datablitz.com.ph/collections/featured-playstation-games"}],
      priceLow: 750, priceHigh: 2000, want: 6
    },
    { id: 8,
      title: "Accessories",
      photo: "https://www.imonojewelryph.com/wp-content/uploads/2023/08/Untitled-design.png",
      desc: "Gender neutral accessories like rings, bracelets, etc.",
      links: [{title:"Buy on Store", url:"https://shopee.ph/"}],
      priceLow: 100, priceHigh: 1000, want: 8
    },
  ];

  /* Helpers */
  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));
  const cardTpl = document.getElementById('cardTemplate');

  function priceMedian(it){ return (it.priceLow + it.priceHigh)/2; }
  function priceToWantRatio(it){ return Math.round((priceMedian(it)/Math.max(it.want,1))*10)/10; }

  /* Render grid */
  function renderGrid(list){
    const grid = $('#gridView');
    grid.innerHTML = '';
    list.forEach(it=>{
      const node = cardTpl.content.cloneNode(true);
      const card = node.querySelector('.card');
      const img = node.querySelector('.card-photo');

      card.dataset.id = it.id;
      img.src = it.photo;
      img.alt = it.title;
      node.querySelector('.card-title').textContent = it.title;
      node.querySelector('.card-price').textContent = `â‰ˆ â‚±${it.priceLow} - â‚±${it.priceHigh}`;
      node.querySelector('.card-want').textContent = `Want: ${it.want}/10 â€” P/W: ${priceToWantRatio(it)}`;

      // open modal when clicking or pressing Enter/Space
      card.addEventListener('click', ()=> openItem(it.id));
      card.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openItem(it.id); }
      });

      grid.appendChild(node);
    });
  }

  /* Modal open/close and rendering */
  const itemView = $('#itemView');
  const backBtn = $('#backBtn');

  function openItem(id){
    const it = items.find(x=>x.id==id);
    if(!it) return;
    $('#itemPhoto').src = it.photo;
    $('#itemPhoto').alt = it.title;
    $('#itemTitle').textContent = it.title;
    $('#itemDesc').textContent = it.desc;
    $('#itemPrice').textContent = `â‚±${it.priceLow} - â‚±${it.priceHigh}`;
    $('#itemWant').textContent = it.want;

    const linksWrap = $('#itemLinks');
    linksWrap.innerHTML = '';

    it.links.forEach(l=>{
      const a = document.createElement('a');
      a.textContent = l.title;
      a.style.display = 'inline-block';
      a.style.marginRight = '8px';
      a.style.padding = '8px 10px';
      a.style.borderRadius = '8px';
      a.style.textDecoration = 'none';

      if(l.copy){
        // copy button
        a.href = '#';
        a.style.background = '#111';
        a.style.color = '#fff';
        a.addEventListener('click', (e)=>{
          e.preventDefault();
          // attempt clipboard
          const val = l.url;
          if(navigator.clipboard && navigator.clipboard.writeText){
            navigator.clipboard.writeText(val).then(()=>{
              const prev = a.textContent;
              a.textContent = 'Copied âœ“';
              setTimeout(()=> a.textContent = prev, 1500);
            }).catch(()=>{
              // fallback prompt
              window.prompt('Copy this number', val);
            });
          } else {
            window.prompt('Copy this number', val);
          }
        });
      } else {
        // normal external link
        a.href = l.url;
        a.target = '_blank';
        a.rel = 'noopener';
        a.style.background = '#fff';
        a.style.color = '#222';
      }

      linksWrap.appendChild(a);
    });

    // show modal
    itemView.classList.remove('hidden');
    itemView.setAttribute('aria-hidden','false');
    // trap focus: move focus to close button
    backBtn.focus();
    // prevent background scroll
    document.documentElement.style.overflow = 'hidden';
  }

  function closeItem(){
    itemView.classList.add('hidden');
    itemView.setAttribute('aria-hidden','true');
    document.documentElement.style.overflow = '';
  }

  // close handlers
  backBtn.addEventListener('click', closeItem);
  // click outside modal content closes it
  itemView.addEventListener('click', (e)=>{
    if(e.target === itemView) closeItem();
  });
  // Escape key closes
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && !itemView.classList.contains('hidden')) closeItem();
  });


  /* Controls: sort & ratio & clear */
  const sortSelect = $('#sortSelect');
  const ratioRange = $('#ratioRange');
  const ratioValue = $('#ratioValue');
  const clearBtn = $('#clearFilters');

  function applyControls(){
    let list = items.slice();

    // filter by price-to-want ratio (max)
    const maxRatio = Number(ratioRange.value);
    list = list.filter(it => priceToWantRatio(it) <= maxRatio);

    // sorting
    const sort = sortSelect.value;
    if(sort === 'want_desc'){
      list.sort((a,b)=> b.want - a.want);
    } else if(sort === 'price_asc'){
      list.sort((a,b)=> priceMedian(a) - priceMedian(b));
    } else if(sort === 'price_desc'){
      list.sort((a,b)=> priceMedian(b) - priceMedian(a));
    }

    renderGrid(list);
  }

  // UI events
  sortSelect.addEventListener('change', applyControls);
  ratioRange.addEventListener('input', ()=>{
    ratioValue.textContent = ratioRange.value;
    applyControls();
  });
  clearBtn.addEventListener('click', ()=>{
    ratioRange.value = 100;
    ratioValue.textContent = 100;
    sortSelect.value = 'want_desc';
    applyControls();
  });

  // initial
  ratioValue.textContent = ratioRange.value;
  renderGrid(items);
  applyControls();
  </script>
</body>
</html>

